---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by sunshuo.
--- DateTime: 2023/5/30 14:54
--- 提示信息
---@class Message:LuaObj
local Message = class("Message", LuaObj)
Message.step1Time = 0.25
Message.step2Time = 1.5
Message.step3Time = 0.45

function Message:Ctor()
    Message.super.Ctor(self, "Prefabs/Common/Message.prefab", nil, Constants.LAYER_ALERT)
    self.cg = GetComponent.CanvasGroup(self.gameObject)
    self.Text = GetComponent.TextMeshProUGUI(self.transform:Find("Text").gameObject)
    self.orgScale = self.transform.localScale
    self.orgY = self.transform.localPosition.y
end

function Message:ShowContent(content, showTime)
    self.cg.alpha = 0
    self.transform.localScale = self.orgScale * 0.6
    self.Text.text = content or ""
    self.seq = DOTween.Sequence()
    self.seq:Append(self.cg:DOFade(1, Message.step1Time))
    self.seq:Join(self.transform:DOScale(self.orgScale, Message.step1Time))
    self.seq:AppendInterval(showTime or Message.step2Time)
    self.seq:Append(self.cg:DOFade(0, Message.step3Time))
    self.seq:Join(self.transform:DOLocalMoveY(self.orgY + 50, Message.step3Time))
    self.seq:AppendCallback(function()
        self.seq = nil
        self:Recycle()
    end)
end

function Message:Recycle()
    self.transform.localScale = self.orgScale
    self.transform.localPosition = Vector3.New(self.transform.localPosition.x, self.orgY, self.transform.localPosition.z)
    Message.super.Recycle(self)

end

function Message:Stop()
    if self.seq then
        self.seq:Kill()
        self.seq = nil
        self:Recycle()
    end
end

---调用此方法 播放提示信息
function Message.Play(content, showTime)
    Message.New():ShowContent(content, showTime)
end

return Message