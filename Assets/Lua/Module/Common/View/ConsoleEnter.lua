---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by VIVA.
--- DateTime: 2023/6/24 23:50
--- 控制台入口
---@class ConsoleEnter:LuaObj
---@field New fun():ConsoleEnter
local ConsoleEnter = class("ConsoleEnter",LuaObj)

function ConsoleEnter:Ctor()
    ConsoleEnter.super.Ctor(self, "Prefabs/Console/ConsoleEnter.prefab", nil, UILayerName.top)

    if Application.isEditor == true then
        AddEventListener(Stage, Event.UPDATE, function()
            if Input.GetKeyDown(UnityEngine.KeyCode.Escape) then
                self:Enter()
            end
        end)
    end
    AddButtonHandler(self.gameObject, PointerHandler.DOWN, function()
        self.delay = DelayedCall(3, happyCall(self, self.Enter))
    end)
    AddButtonHandler(self.gameObject, PointerHandler.UP, happyCall(self, self.CancelDelay))
    AddButtonHandler(self.gameObject, PointerHandler.EXIT, happyCall(self, self.CancelDelay))
end

function ConsoleEnter:CancelDelay()
    if self.delay then
        CancelDelayedCall(self.delay)
        self.delay = nil
    end
end

function ConsoleEnter:Enter()
    require("Module.Common.View.ConsoleView").ShowOrHide()
end
return ConsoleEnter